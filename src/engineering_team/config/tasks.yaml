design_task:
  description: >
    Create a complete backend design for {module_name}.py with class {class_name}.
    Include method signatures, validation rules, transaction model, and "as-of" reporting approach.
    Requirements: {requirements}
    IMPORTANT: Output ONLY markdown design documentation.
  expected_output: >
    A detailed implementation-ready design in markdown.
  agent: engineering_lead
  output_file: output/{module_name}_design.md


code_task:
  description: >
    Implement {module_name}.py according to the design. Requirements: {requirements}
    IMPORTANT: Output ONLY raw Python code (no markdown). Must be directly executable.
  expected_output: >
    Raw Python code for {module_name}.py
  agent: backend_engineer
  context:
    - design_task
  output_file: output/{module_name}


test_task:
  description: >
    Write unit tests for output/{module_name}.py using unittest.
    IMPORTANT: Output ONLY raw Python code (no markdown).
  expected_output: >
    Raw Python code for test_{module_name}.py
  agent: test_engineer
  context:
    - code_task
  output_file: output/test_{module_name}


frontend_task:
  description: >
    Generate a complete runnable Next.js (App Router) + TypeScript + Tailwind frontend.
    It must run with:
      npm install
      npm run dev
    with ZERO manual fixes.

    Use the write_file tool to create ALL required files under output/frontend/.
    Do NOT output code blocks or markdown in your final answer.
    After writing all files, output a short confirmation only.

    Requirements: {requirements}
  expected_output: >
    A runnable Next.js app created under output/frontend/ with pinned dependency versions,
    correct App Router API routes, and complete required skeleton files.
  agent: frontend_engineer
  context:
    - code_task
  output_file: output/frontend/FRONTEND_GENERATION_LOG.txt